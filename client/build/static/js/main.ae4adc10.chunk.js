(this.webpackJsonpmern=this.webpackJsonpmern||[]).push([[0],{201:function(e,t,a){e.exports=a(454)},224:function(e,t,a){},423:function(e,t,a){},442:function(e,t,a){},443:function(e,t,a){},451:function(e,t,a){},454:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(34),o=a.n(r),c=a(35),s=a(36),i=a(24),u=a(39),m=a(38),d=a(27),g=a.n(d),f=a(10),p=a(19),h=(a(224),a(55)),E=a(85),b=a.n(E),v=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={hidden:!0},n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=this;setTimeout((function(){e.setState({hidden:!1})}),this.props.waitBeforeShow)}},{key:"render",value:function(){return this.state.hidden?"":this.props.children}}]),a}(l.a.Component),y={styles:[{featureType:"administrative",elementType:"labels.text.fill",stylers:[{color:"#444444"}]},{featureType:"landscape",elementType:"all",stylers:[{color:"#f2f2f2"}]},{featureType:"poi",elementType:"all",stylers:[{visibility:"off"}]},{featureType:"road",elementType:"all",stylers:[{saturation:-100},{lightness:45}]},{featureType:"road.highway",elementType:"all",stylers:[{visibility:"simplified"}]},{featureType:"road.arterial",elementType:"labels.icon",stylers:[{visibility:"off"}]},{featureType:"transit",elementType:"all",stylers:[{visibility:"off"}]},{featureType:"water",elementType:"all",stylers:[{color:"#2b0001"},{visibility:"on"}]}],disableDefaultUI:!1,zoomControl:!0};function w(e){b.a.setApiKey("AIzaSyDZpId9vU-4E_1JioDeZ1IV58nOK5ygtZE"),b.a.setLanguage("en");var t=Object(n.useState)([e]),a=Object(p.a)(t,2),r=a[0],o=a[1];Object(n.useEffect)((function(){o(e),e.wineList.map((function(e){b.a.fromAddress(e.address).then((function(t){return e.coords=t.results[0].geometry.location,e}),(function(e){console.error(e)}))}))}),[e,r]);var c=Object(h.withScriptjs)(Object(h.withGoogleMap)((function(t){return l.a.createElement(h.GoogleMap,{className:"map",defaultZoom:1.5,options:y,defaultCenter:{lat:0,lng:0}},e.wineList.map((function(e){return l.a.createElement(h.Marker,{position:e.coords,key:e._id},l.a.createElement(h.InfoWindow,null,l.a.createElement("div",null,e.wine_name," ",e.year)))})))})));return l.a.createElement(v,{waitBeforeShow:700},l.a.createElement(c,{googleMapURL:"https://maps.googleapis.com/maps/api/js?key=AIzaSyDZpId9vU-4E_1JioDeZ1IV58nOK5ygtZE&v=3.exp&libraries=geometry,drawing,places",loadingElement:l.a.createElement("div",{style:{height:"100%"}}),containerElement:l.a.createElement("div",{style:{height:"545px"}}),mapElement:l.a.createElement("div",{style:{height:"100%"}})}))}var C=a(455),N=a(463),O=a(464),S=a(456);a(423);function j(e){var t=e.setWines,a=e.fullWineList,r=(e.wines,Object(n.useState)("Color")),o=Object(p.a)(r,2),c=o[0],s=o[1],i=Object(n.useState)("Country"),u=Object(p.a)(i,2),m=u[0],d=u[1],g=Object(n.useState)("Size"),f=Object(p.a)(g,2),h=f[0],E=f[1],b=function(e){var n=e.target.id;console.log("colorclicked",a),t((function(){return a.filter((function(e){return e.color===n}))})),s(e.target.id),d("All Countries"),E("All Sizes")},v=function(e){var n=e.target.id;t((function(){return a.filter((function(e){return e.country===n}))})),d(e.target.id),E("All Sizes"),s("All Colors")},y=function(e){var n=e.target.id;t((function(){return a.filter((function(e){return e.size===n}))})),E(e.target.id),s("All Colors"),d("All Countries")},w=Object(n.useState)(!1),j=Object(p.a)(w,2),k=j[0],A=j[1],T=Object(n.useState)(!1),U=Object(p.a)(T,2),I=U[0],z=U[1],G=Object(n.useState)(!1),P=Object(p.a)(G,2),D=P[0],B=P[1],M=function(e){return console.log("e.target.val",e.target.value)};return l.a.createElement(l.a.Fragment,null,l.a.createElement(C.a,{isOpen:k,toggle:function(){return A((function(e){return!e}))},onChange:M,inline:"true"},l.a.createElement(N.a,{className:"button",caret:!0},c),l.a.createElement(O.a,null,l.a.createElement(S.a,{id:"White",onClick:b},"White"),l.a.createElement(S.a,{id:"Rose",onClick:b},"Rose"),l.a.createElement(S.a,{id:"Red",onClick:b},"Red"),l.a.createElement(S.a,{id:"All Colors",onClick:function(e){console.log("colorall",a),t((function(){return a.filter((function(e){return e.color,e.color,["Red"===e.color]}))})),s(e.target.id),d("All Countries"),E("All Sizes")}},"All"))),l.a.createElement(C.a,{isOpen:I,toggle:function(){return z((function(e){return!e}))},onChange:function(e){return console.log("e.target.val",e.target.value)},inline:"true"},l.a.createElement(N.a,{className:"button",caret:!0},m),l.a.createElement(O.a,null,l.a.createElement(S.a,{id:"Canada",onClick:v},"Canada"),l.a.createElement(S.a,{id:"France",onClick:v},"France"),l.a.createElement(S.a,{id:"Germany",onClick:v},"Germany"),l.a.createElement(S.a,{id:"Greece",onClick:v},"Greece"),l.a.createElement(S.a,{id:"Italy",onClick:v},"Italy"),l.a.createElement(S.a,{id:"New Zealand",onClick:v},"New Zealand"),l.a.createElement(S.a,{id:"Portugal",onClick:v},"Portugal"),l.a.createElement(S.a,{id:"South Africa",onClick:v},"South Africa"),l.a.createElement(S.a,{id:"Spain",onClick:v},"Spain"),l.a.createElement(S.a,{id:"USA",onClick:v},"U.S.A."),l.a.createElement(S.a,{id:"All Countries",onClick:function(e){t((function(){return a.filter((function(e){return e.country,e.country,e.country,e.country,e.country,e.country,e.country,e.country,["USA"===e.country]}))})),d(e.target.id),E("All Sizes"),s("All Colors")}},"All"))),l.a.createElement(C.a,{isOpen:D,toggle:function(){return B((function(e){return!e}))},onChange:M,inline:"true"},l.a.createElement(N.a,{className:"button",caret:!0},h),l.a.createElement(O.a,null,l.a.createElement(S.a,{id:"Glass",onClick:y},"Glass"),l.a.createElement(S.a,{id:"Bottle",onClick:y},"Bottle"),l.a.createElement(S.a,{id:"All Sizes",onClick:function(e){t((function(){return a.filter((function(e){return e.size,["Bottle"===e.size]}))})),E(e.target.id),s("All Colors"),d("All Countries")}},"All"))))}a(441);var k=a(459),A=a(460),T=a(461),U=function(){return g.a.get("/api/wines")};a(442);function I(e){var t=e.children;return l.a.createElement("div",{className:"list-overflow-container"},l.a.createElement("ul",{className:"list-group"},t))}function z(e){var t=e.children;return l.a.createElement("li",{className:"list-group-item"},t)}var G=a(196),P=a(462),D=a(457),B=a(458),M=(a(443),function(e){var t=Object(n.useState)(!1),a=Object(p.a)(t,2),r=a[0],o=a[1],c=function(){return o(!r)};return l.a.createElement("div",null,l.a.createElement(G.a,{onClick:c,className:"info"},"info"),l.a.createElement(P.a,{isOpen:r,toggle:c,className:"wine"},l.a.createElement(D.a,{toggle:c},l.a.createElement("h2",null,l.a.createElement("strong",{className:"strong"},e.wine.wine_name),' "',e.wine.full_name,'"'),l.a.createElement("h4",null,e.wine.year," ",e.wine.region,", ",e.wine.country," ",l.a.createElement("strong",{className:"strong"}," ",e.wine.PPG," | ",e.wine.PPB))),l.a.createElement(B.a,null,l.a.createElement("strong",{className:"strong"},"Style: "),e.wine.carbonation," ",e.wine.color,l.a.createElement("br",null),l.a.createElement("strong",{className:"strong"},"Varietal: "),e.wine.grape_detail,l.a.createElement("br",null),l.a.createElement("strong",{className:"strong"},"Notes: "),e.wine.details)))});a(451);function _(){var e=Object(n.useState)([]),t=Object(p.a)(e,2),a=t[0],r=t[1],o=Object(n.useState)([]),c=Object(p.a)(o,2),s=c[0],i=c[1];return Object(n.useEffect)((function(){U().then((function(e){r(e.data),i(e.data)})).catch((function(e){return console.log(e)}))}),[]),l.a.createElement("div",{className:"body"},l.a.createElement(k.a,{className:"header componenets"},l.a.createElement(A.a,{lg:8}),a.length>0&&l.a.createElement(j,{fullWineList:s,setWines:r,wines:a,className:"filters"})),l.a.createElement(T.a,{fluid:!0,className:"main"},l.a.createElement(k.a,null,l.a.createElement(A.a,{lg:8},l.a.createElement(T.a,{fluid:!0,className:"map"},l.a.createElement(w,{wineList:a}))),l.a.createElement(A.a,{lg:4},l.a.createElement(T.a,{fluid:!0,className:"components"},a.length?l.a.createElement(I,null,a.map((function(e){return l.a.createElement(z,{key:e._id,wine:e},l.a.createElement(k.a,null,l.a.createElement(A.a,{lg:10},l.a.createElement("strong",{wine:e},e.wine_name,' "',e.full_name,'"'),l.a.createElement("div",null,e.year," ",e.grape," ",e.PPG," | ",e.PPB)),l.a.createElement(A.a,{lg:2},l.a.createElement(M,{className:"info",wine:e}," "))))}))):l.a.createElement("h3",null,"No Results to Display"))))))}var x=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;return Object(c.a)(this,a),(e=t.call(this)).state={username:"",password:"",confirmPassword:""},e.handleSubmit=e.handleSubmit.bind(Object(i.a)(e)),e.handleChange=e.handleChange.bind(Object(i.a)(e)),e}return Object(s.a)(a,[{key:"handleChange",value:function(e){this.setState({[e.target.name]:e.target.value})}},{key:"handleSubmit",value:function(e){var t=this;console.log("sign-up handleSubmit, username: "),console.log(this.state.username),e.preventDefault(),g.a.post("/api/user/",{username:this.state.username,password:this.state.password}).then((function(e){console.log(e),e.data.errmsg?console.log("username already taken"):(console.log("successful signup"),t.setState({redirectTo:"/login"}))})).catch((function(e){console.log("signup error: "),console.log(e)}))}},{key:"render",value:function(){return l.a.createElement("div",{className:"SignupForm"},l.a.createElement("h4",null,"Sign up"),l.a.createElement("form",{className:"form-horizontal"},l.a.createElement("div",{className:"form-group"},l.a.createElement("div",{className:"col-1 col-ml-auto"},l.a.createElement("label",{className:"form-label",htmlFor:"username"},"Username")),l.a.createElement("div",{className:"col-3 col-mr-auto"},l.a.createElement("input",{className:"form-input",type:"text",id:"username",name:"username",placeholder:"Username",value:this.state.username,onChange:this.handleChange}))),l.a.createElement("div",{className:"form-group"},l.a.createElement("div",{className:"col-1 col-ml-auto"},l.a.createElement("label",{className:"form-label",htmlFor:"password"},"Password: ")),l.a.createElement("div",{className:"col-3 col-mr-auto"},l.a.createElement("input",{className:"form-input",placeholder:"password",type:"password",name:"password",value:this.state.password,onChange:this.handleChange}))),l.a.createElement("div",{className:"form-group "},l.a.createElement("div",{className:"col-7"}),l.a.createElement("button",{className:"btn btn-primary col-1 col-mr-auto",onClick:this.handleSubmit,type:"submit"},"Sign up"))))}}]),a}(n.Component),F=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;return Object(c.a)(this,a),(e=t.call(this)).state={username:"",password:"",redirectTo:null},e.handleSubmit=e.handleSubmit.bind(Object(i.a)(e)),e.handleChange=e.handleChange.bind(Object(i.a)(e)),e}return Object(s.a)(a,[{key:"handleChange",value:function(e){this.setState({[e.target.name]:e.target.value})}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault(),console.log("handleSubmit"),g.a.post("/api/user/login",{username:this.state.username,password:this.state.password}).then((function(e){console.log("login response: "),console.log(e),200===e.status&&(t.props.updateUser({loggedIn:!0,username:e.data.username}),t.setState({redirectTo:"/"}))})).catch((function(e){console.log("login error: "),console.log(e)}))}},{key:"render",value:function(){return this.state.redirectTo?l.a.createElement(f.a,{to:{pathname:this.state.redirectTo}}):l.a.createElement("div",null,l.a.createElement("h4",null,"Login"),l.a.createElement("form",{className:"form-horizontal"},l.a.createElement("div",{className:"form-group"},l.a.createElement("div",{className:"col-1 col-ml-auto"},l.a.createElement("label",{className:"form-label",htmlFor:"username"},"Username")),l.a.createElement("div",{className:"col-3 col-mr-auto"},l.a.createElement("input",{className:"form-input",type:"text",id:"username",name:"username",placeholder:"Username",value:this.state.username,onChange:this.handleChange}))),l.a.createElement("div",{className:"form-group"},l.a.createElement("div",{className:"col-1 col-ml-auto"},l.a.createElement("label",{className:"form-label",htmlFor:"password"},"Password: ")),l.a.createElement("div",{className:"col-3 col-mr-auto"},l.a.createElement("input",{className:"form-input",placeholder:"password",type:"password",name:"password",value:this.state.password,onChange:this.handleChange}))),l.a.createElement("div",{className:"form-group "},l.a.createElement("div",{className:"col-7"}),l.a.createElement("button",{className:"btn btn-primary col-1 col-mr-auto",onClick:this.handleSubmit,type:"submit"},"Login"))))}}]),a}(n.Component),L=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;return Object(c.a)(this,a),(e=t.call(this)).state={loggedIn:!1,username:null},e.getUser=e.getUser.bind(Object(i.a)(e)),e.componentDidMount=e.componentDidMount.bind(Object(i.a)(e)),e.updateUser=e.updateUser.bind(Object(i.a)(e)),e}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.getUser()}},{key:"updateUser",value:function(e){this.setState(e)}},{key:"getUser",value:function(){var e=this;g.a.get("/api/user/").then((function(t){console.log("Get user response: "),console.log(t.data.user),t.data.user?(console.log("Get User: There is a user saved in the server session: "),e.setState({loggedIn:!0,username:t.data.user.username})):(console.log("Get user: no user"),e.setState({loggedIn:!1,username:null}))})).catch((function(e){return console.log("err",e)}))}},{key:"render",value:function(){var e=this;return l.a.createElement("div",{className:"App"},this.state.loggedIn&&l.a.createElement("p",null,"Join the party, ",this.state.username,"!"),l.a.createElement(f.b,{path:"/",component:_,exact:!0}),l.a.createElement(f.b,{path:"/login",render:function(){return l.a.createElement(F,{updateUser:e.updateUser})}}),l.a.createElement(f.b,{path:"/signup",render:function(){return l.a.createElement(x,null)}}))}}]),a}(n.Component);var W=a(83);o.a.render(l.a.createElement(W.a,null,l.a.createElement(L,null)),document.getElementById("root")),function(){function e(){return function(e){for(var t="=".repeat((4-e.length%4)%4),a=(e+t).replace(/\-/g,"+").replace(/_/g,"/"),n=window.atob(a),l=new Uint8Array(n.length),r=0;r<n.length;++r)l[r]=n.charCodeAt(r);return l}("BJthRQ5myDgc7OSXzPCMftGw-n16F7zQBEN7EUD6XxcfTTvrLGWSIG7y_JxiWtVlCFua0S8MTB5rPziBqNx1qIo")}var t="".concat("","/sw.js");navigator.serviceWorker.register(t).then((function(t){return console.warn("response",t),t.pushManager.getSubscription().then((function(a){t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:e()})}))}))}()}},[[201,1,2]]]);
//# sourceMappingURL=main.ae4adc10.chunk.js.map